---
layout: default
---

##  FT_PREPARE_HEADMODEL

Note that this reference documentation is identical to the help that is displayed in MATLAB when you type "help ft_prepare_headmodel".

`<html>``<pre>`
    `<a href=/reference/ft_prepare_headmodel>``<font color=green>`FT_PREPARE_HEADMODEL`</font>``</a>` constructs a volume conduction model from the geometry
    of the head. The volume conduction model specifies how currents that are
    generated by sources in the brain, e.g. dipoles, are propagated through the
    tissue and how these result in externally measureable EEG potentials or MEG
    fields.
 
    FieldTrip implements a variety of forward solutions, partially with internal
    code and some of them using external toolboxes or executables. Each of the
    forward solutions requires a set of configuration options which are listed
    below. This function takes care of all the preparatory steps in the
    construction of the volume conduction model and sets it up so that
    subsequent computations are efficient and fast.
 
    Use as
    headmodel = ft_prepare_headmodel(cfg)       or
    headmodel = ft_prepare_headmodel(cfg, mesh) with the output of `<a href=/reference/ft_prepare_mesh>``<font color=green>`FT_PREPARE_MESH`</font>``</a>` or `<a href=/reference/ft_read_headshape>``<font color=green>`FT_READ_HEADSHAPE`</font>``</a>`
    headmodel = ft_prepare_headmodel(cfg, seg)  with the output of `<a href=/reference/ft_volumesegment>``<font color=green>`FT_VOLUMESEGMENT`</font>``</a>`
    headmodel = ft_prepare_headmodel(cfg, elec) with the output of `<a href=/reference/ft_read_sens>``<font color=green>`FT_READ_SENS`</font>``</a>`
    headmodel = ft_prepare_headmodel(cfg, grid) with the output of `<a href=/reference/ft_prepare_leadfield>``<font color=green>`FT_PREPARE_LEADFIELD`</font>``</a>`
 
    In general the input to this function is a geometrical description of the
    shape of the head and a description of the electrical conductivity. The
    geometrical description can be a set of surface points obtained from
    fT_READ_HEADSHAPE, a surface mesh that was obtained from `<a href=/reference/ft_prepare_mesh>``<font color=green>`FT_PREPARE_MESH`</font>``</a>` or
    a segmented anatomical MRI that was obtained from `<a href=/reference/ft_volumesegment>``<font color=green>`FT_VOLUMESEGMENT`</font>``</a>`.
 
    The cfg argument is a structure that can contai
    cfg.method         string that specifies the forward solution, see below
    cfg.conductivity   a number or a vector containing the conductivities of the compartments
    cfg.tissue         a string or integer, to be used in combination with a 'seg' for the
                       second intput. If 'brain', 'skull', and 'scalp' are fields
                       present in 'seg', then cfg.tissue need not be specified, as
                       these are defaults, depending on cfg.method. Otherwise,
                       cfg.tissue should refer to which field(s) of seg should be used.
 
    For EEG the following methods are availabl
    singlesphere       analytical single sphere model
    concentricspheres  analytical concentric sphere model with up to 4 spheres
    openmeeg           boundary element method, based on the OpenMEEG software
    bemcp              boundary element method, based on the implementation from Christophe Phillips
    dipoli             boundary element method, based on the implementation from Thom Oostendorp
    asa                boundary element method, based on the (commercial) ASA software
    simbio             finite element method, based on the SimBio software
    fns                finite difference method, based on the FNS software
    infinite           electric dipole in an infinite homogenous medium
    halfspace          infinite homogenous medium on one side, vacuum on the other
    besa               finite element leadfield matrix from BESA
    interpolate        interpolate the precomputed leadfield
 
    For MEG the following methods are availabl
    openmeeg           boundary element method, based on the OpenMEEG software
    singlesphere       analytical single sphere model
    localspheres       local spheres model for MEG, one sphere per channel
    singleshell        realisically shaped single shell approximation, based on the implementation from Guido Nolte
    infinite           magnetic dipole in an infinite vacuum
 
    Each specific method has its own specific configuration options which are listed below.
 
    BEMCP, DIPOLI, OPENMEEG
    cfg.tissue            see above; in combination with 'seg' input
    cfg.isolatedsource    (optional)
 
    CONCENTRICSPHERES
    cfg.tissue            see above; in combination with 'seg' input
    cfg.fitind            (optional)
 
    LOCALSPHERES
    cfg.grad
    cfg.tissue            see above; in combination with 'seg' input; default options are 'brain' or 'scalp'
    cfg.feedback          (optional)
    cfg.radius            (optional)
    cfg.maxradius         (optional)
    cfg.baseline          (optional)
 
    SIMBIO
    cfg.conductivity
 
    SINGLESHELL
    cfg.tissue            see above; in combination with 'seg' input; default options are 'brain' or 'scalp'
 
    SINGLESPHERE
    cfg.tissue            see above; in combination with 'seg' input; default options are 'brain' or 'scalp'; must be only 1 value
 
    INTERPOLATE
     cfg.outputfile       (required) string, filename prefix for the output files
 
    BESA
    cfg.headmodel         (required) string, filename of precomputed FEM leadfield
    cfg.elecfile          (required) string, filename of electrode configuration for the FEM leadfield
    cfg.outputfile        (required) string, filename prefix for the output files
 
    FNS
    cfg.tissue
    cfg.tissueval
    cfg.conductivity
    cfg.elec
    cfg.grad
    cfg.transform
    cfg.unit
 
    HALFSPACE
    cfg.point
    cfg.submethod         (optional)
 
    More details for each of the specific methods can be found in the corresponding
    low-level function which is called FT_HEADMODEL_XXX where XXX is the method
    of choise.
 
    See also `<a href=/reference/ft_prepare_sourcemodel>``<font color=green>`FT_PREPARE_SOURCEMODEL`</font>``</a>`, `<a href=/reference/ft_prepare_leadfield>``<font color=green>`FT_PREPARE_LEADFIELD`</font>``</a>`, `<a href=/reference/ft_prepare_mesh>``<font color=green>`FT_PREPARE_MESH`</font>``</a>`,
    `<a href=/reference/ft_headmodel_bemcp>``<font color=green>`FT_HEADMODEL_BEMCP`</font>``</a>`, `<a href=/reference/ft_headmodel_asa>``<font color=green>`FT_HEADMODEL_ASA`</font>``</a>`, `<a href=/reference/ft_headmodel_dipoli>``<font color=green>`FT_HEADMODEL_DIPOLI`</font>``</a>`,
    `<a href=/reference/ft_headmodel_simbio>``<font color=green>`FT_HEADMODEL_SIMBIO`</font>``</a>`, `<a href=/reference/ft_headmodel_fns>``<font color=green>`FT_HEADMODEL_FNS`</font>``</a>`, `<a href=/reference/ft_headmodel_halfspace>``<font color=green>`FT_HEADMODEL_HALFSPACE`</font>``</a>`,
    `<a href=/reference/ft_headmodel_infinite>``<font color=green>`FT_HEADMODEL_INFINITE`</font>``</a>`, `<a href=/reference/ft_headmodel_openmeeg>``<font color=green>`FT_HEADMODEL_OPENMEEG`</font>``</a>`, `<a href=/reference/ft_headmodel_singlesphere>``<font color=green>`FT_HEADMODEL_SINGLESPHERE`</font>``</a>`,
    `<a href=/reference/ft_headmodel_concentricspheres>``<font color=green>`FT_HEADMODEL_CONCENTRICSPHERES`</font>``</a>`, `<a href=/reference/ft_headmodel_localspheres>``<font color=green>`FT_HEADMODEL_LOCALSPHERES`</font>``</a>`,
    `<a href=/reference/ft_headmodel_singleshell>``<font color=green>`FT_HEADMODEL_SINGLESHELL`</font>``</a>`, `<a href=/reference/ft_headmodel_interpolate>``<font color=green>`FT_HEADMODEL_INTERPOLATE`</font>``</a>`
`</pre>``</html>`

